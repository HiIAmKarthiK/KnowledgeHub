<head>
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css"
    rel="stylesheet"
    integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1"
    crossorigin="anonymous"
  />
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css"
    integrity="sha512-+4zCK9k+qNFUR5X+cKL9EIR+ZOhtIloNl9GIKS57V1MyNsYpYcUrUeQc9vNfzsWfV28IaLL3i96P9sdNyeRssA=="
    crossorigin="anonymous"
  />
</head>

<nav class="navbar navbar-expand-lg navbar-light navbaground">
  <div class="container-fluid">
    <a
      class="navbar-brand navtext"
      style="color: antiquewhite"
      routerLink="/dashboard"
      ><i class="fas fa-book-open"></i> Knowledge Hub</a
    >
    <button
      class="navbar-toggler"
      type="button"
      data-bs-toggle="collapse"
      data-bs-target="#navbarSupportedContent"
      aria-controls="navbarSupportedContent"
      aria-expanded="false"
      aria-label="Toggle navigation"
    >
      <span class="navbar-toggler-icon"></span>
    </button>
  </div>
</nav>
<div class="body">
  <div class="wrapper wrapper--w960">
    <div class="rounded-3">
      <div class="container-fluid" style="background-color: aliceblue">
        <div class="row">
          <div class="col-sm-6" class="imagebox">
            <div class="container offset-sm-1">
              <br /><br /><br /><br />
              <form [formGroup]="reactiveForm">
                <div class="custom-file fileInputProfileWrap">
                  <input
                    type="file"
                    formControlName="image"
                    accept="image/*"
                    (change)="fileChangeEvent($event)"
                    class="fileInputProfile"
                  />

                  <div class="img-space">
                    <ng-container *ngIf="isImageSaved; else elseTemplate">
                      <img [src]="cardImageBase64" />
                    </ng-container>

                    <ng-template #elseTemplate>
                      <img
                        src="/assets/images/book-logo.jpeg"
                        class="img-responsive"
                      />
                    </ng-template>
                  </div>
                </div>
              </form>
            </div>
          </div>
          <div class="col-sm-7" style="background-color: white">
            <div class="form1">
              <div class="col-sm-6 offset-sm-3">
                <div
                  class="rounded-2 mb-2 text-center py-4"
                  style="color: black; font-style: bold"
                >
                  <i class="fa fa-book" aria-hidden="true"></i> UPLOAD BOOK
                </div>
              </div>
              <div class="container">
                <div class="row">
                  <form [formGroup]="reactiveForm" class="form-inline">
                    <div class="row row-space">
                      <div class="col-sm-6">
                        <mat-form-field
                          appearance="outline"
                          class="example-full-width1"
                        >
                          <mat-label>Book Title</mat-label>
                          <input
                            matInput
                            formControlName="bookTitle"
                            id="bookTitle"
                          />
                          <mat-error
                            *ngIf="f.bookTitle.touched && f.bookTitle.invalid"
                            class="text-danger"
                          >
                            <mat-error
                              *ngIf="f.bookTitle.errors.required"
                              style="font-size: small"
                            >
                              is required.
                            </mat-error>
                          </mat-error>
                        </mat-form-field>
                      </div>
                      <div class="col-sm-6">
                        <mat-form-field
                          appearance="outline"
                          class="example-full-width1"
                        >
                          <mat-label>Author Name</mat-label>
                          <input
                            matInput
                            formControlName="authorName"
                            id="authorName"
                          />
                          <mat-error
                            *ngIf="f.authorName.touched &amp;&amp; f.authorName.invalid"
                            class="text-danger"
                          >
                            <mat-error
                              *ngIf="f.authorName.errors.required"
                              style="font-size: small"
                            >
                              is required.
                            </mat-error>
                          </mat-error>
                        </mat-form-field>
                      </div>
                    </div>

                    <div class="row row-space">
                      <div class="col-sm-6">
                        <mat-form-field
                          appearance="outline"
                          class="example-full-width"
                        >
                          <mat-label>Genre</mat-label>
                          <mat-select
                            formControlName="bookGenre"
                            id="bookGenre"
                            multiple
                          >
                            <mat-option
                              *ngFor="let topping of toppingList"
                              [value]="topping"
                              >{{ topping }}</mat-option
                            >
                          </mat-select>
                          <mat-error
                            *ngIf="f.bookGenre.touched &amp;&amp; f.bookGenre.invalid"
                            class="text-danger"
                          >
                            <mat-error
                              *ngIf="f.bookGenre.errors.required"
                              style="font-size: small"
                            >
                              is required.
                            </mat-error>
                          </mat-error>
                        </mat-form-field>
                      </div>

                      <div class="col-sm-6">
                        <mat-form-field
                          appearance="outline"
                          class="example-full-width"
                        >
                          <mat-label>Language</mat-label>
                          <input
                            matInput
                            formControlName="language"
                            id="language"
                          />
                          <mat-error
                            *ngIf="f.language.touched &amp;&amp; f.language.invalid"
                            class="text-danger"
                          >
                            <mat-error
                              *ngIf="f.language.errors.required"
                              style="font-size: small"
                            >
                              is required.
                            </mat-error>
                          </mat-error>
                        </mat-form-field>
                      </div>
                    </div>

                    <div class="row row-space">
                      <div class="col-sm-6">
                        <mat-form-field
                          appearance="outline"
                          class="example-full-width1"
                        >
                          <mat-label>Reading Time In Minutes</mat-label>
                          <input
                            matInput
                            type="number"
                            formControlName="readingTimeInMinutes"
                            id="readingTimeInMinutes"
                          />
                          <mat-error
                            *ngIf="
                              f.readingTimeInMinutes.touched &&
                              f.readingTimeInMinutes.invalid
                            "
                            class="text-danger"
                          >
                            <mat-error
                              *ngIf="f.readingTimeInMinutes.errors.required"
                              style="font-size: small"
                            >
                              is required.
                            </mat-error>
                          </mat-error>
                        </mat-form-field>
                      </div>
                      <div class="col-sm-6">
                        <mat-form-field
                          appearance="outline"
                          class="example-full-width1"
                        >
                          <mat-label>Total Pages </mat-label>
                          <input
                            matInput
                            type="number"
                            formControlName="totalPages"
                            id="totalPages"
                          />
                          <mat-error
                            *ngIf="f.totalPages.touched &amp;&amp; f.totalPages.invalid"
                            class="text-danger"
                          >
                            <mat-error
                              *ngIf="f.totalPages.errors.required"
                              style="font-size: small"
                            >
                              is required.
                            </mat-error>
                          </mat-error>
                        </mat-form-field>
                      </div>
                    </div>
                    <mat-form-field
                      appearance="outline"
                      class="example-full-width"
                    >
                      <mat-label>Book Description</mat-label>
                      <textarea
                        matInput
                        formControlName="description"
                        id="description"
                      ></textarea>
                      <mat-error
                        *ngIf="f.description.touched &amp;&amp; f.description.invalid"
                        class="text-danger"
                      >
                        <mat-error
                          *ngIf="f.description.errors.required"
                          style="font-size: small"
                        >
                          is required.
                        </mat-error>
                      </mat-error>
                    </mat-form-field>

                    <input
                      type="file"
                      class="form-control"
                      formControlName="file"
                      id="file"
                      style="padding: 4px"
                      accept=".pdf"
                      (change)="onFileChanged($event)"
                    />
                    <mat-error
                      *ngIf="f.file.touched &amp;&amp; f.file.invalid"
                      class="text-danger"
                    >
                      <mat-error *ngIf="f.file.errors.required"
                        >is required.</mat-error
                      >
                    </mat-error>
                    <div class="col-sm py-3 offset-sm-5">
                      <button
                        mat-raised-button
                        class="button"
                        style="color: white"
                        [disabled]="!reactiveForm.valid"
                        (click)="uploadbook(reactiveForm)"
                      >
                        upload
                      </button>
                    </div>
                  </form>
                  <div class="col-sm-6 offset-sm-4">
                    <div class="col-sm-12" style="color: rgb(6, 177, 6)">
                      <div *ngIf="message">{{ message }}</div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <mat-progress-bar
    class="loading-bar"
    [hidden]="!isLoading"
    mode="indeterminate"
  ></mat-progress-bar>
</div>
